server {
  listen 80;
  server_name _;

  client_max_body_size 300M;
  access_log /var/log/nginx/access.log;
  error_log  /var/log/nginx/error.log;

  # Catch both /minutes_maker and /minutes_maker/ and forward to the backend
  location = /minutes_maker {
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_pass http://api:10355/minutes_maker;
  }
  location /minutes_maker/ {
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_pass http://api:10355/minutes_maker/;
  }

  # Similarly for /query
  location = /query {
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_pass http://api:10355/query;
  }
  location /query/ {
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_pass http://api:10355/query/;
  }

  root /usr/share/nginx/html;
  index index.html;
}
